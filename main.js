(()=>{"use strict";function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var e=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.size=t}var n,i;return n=e,(i=[{key:"renderBoard",value:function(){for(var t=document.querySelector(".block"),e=0;e<this.size;e+=1){var n=document.createElement("div");n.classList.add("cell"),t.appendChild(n)}return t}}])&&t(n.prototype,i),e}();function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}new(function(){function t(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.board=new e(n),this.countClick=0,this.countGoblin=0}var i,o;return i=t,(o=[{key:"boardInit",value:function(){this.board.renderBoard(),this.cells=document.querySelectorAll(".cell"),this.wrapp=document.querySelector(".block"),this.startButton=document.getElementById("start"),this.modal=document.querySelector(".hystmodal"),this.button=document.querySelector(".hystmodal__close")}},{key:"movePicture",value:function(){var t=this,e=new Image;e.src="https://github.com/netology-code/ahj-homeworks/blob/simplification/dom/pic/goblin.png?raw=true",e.classList.add("img"),this.timerId=setInterval((function(){var n=Math.floor(Math.random()*t.cells.length);t.cells[n].appendChild(e),t.countGoblin+=1,t.checkCount()}),1e3)}},{key:"checkCount",value:function(){5===this.countClick&&this.showWin("Ты победил!"),5===this.countGoblin&&this.showWin("Ты проиграл!")}},{key:"showWin",value:function(t){var e=document.querySelector(".hystmodal");document.querySelector(".finalTitle").textContent=t,e.style.visibility="visible",clearTimeout(this.timerId),this.hideButton()}},{key:"start",value:function(){var t=this;this.boardInit(),this.startButton.addEventListener("click",(function(){document.querySelector(".startButton").disabled=!0,t.movePicture()})),this.wrapp.addEventListener("click",(function(e){"IMG"===e.target.tagName&&(t.countClick+=1,t.countGoblin-=1)}))}},{key:"hideButton",value:function(){var t=this;this.button.addEventListener("click",(function(){t.modal.style.visibility="hidden",window.location.reload()}))}}])&&n(i.prototype,o),t}())(4).start()})();